PKG_LIBS=$(SHLIB_OPENMP_FCFLAGS) $(FLIBS)
PKG_FCFLAGS=$(SHLIB_OPENMP_FCFLAGS)

# The code below is required for the package to work on OS X
# where the current available version of gfortran is 4.2.
# The package now uses preprocessor directives to not compile
# code that depends upon OpenMP. For gfortran 4.2 the way
# to indicate that the preprocessor is needed is by giving
# the source code file the .F95 extension (with capital F).
# This requires specifying a make target for *.F95.


SOURCES_F95 = $(wildcard F95/*.F95)
SOURCES_C = $(wildcard *.c)

OBJECTS = $(SOURCES_F95:.F95=.o) $(SOURCES_C:.c=.o)

all: $(SHLIB)

%.o: %.F95
	$(FC) $(PKG_FCFLAGS) $(FCPICFLAGS) $(FCFLAGS) -c  $< -o $@


.PHONY: all clean

clean:
	rm -f $(OBJECTS)

